<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" ></script>
	<script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>
	{% if not chartDataAsJson %}<script type="text/javascript" src="{{ url_for('static', filename='exampleData.js') }}"></script>{% endif %}
	<script type="text/javascript" src="{{ url_for('static', filename='displayChart.js') }}" ></script>
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='view.css') }}">
	<title>Display chart</title>
</head>
<body>
	<div id="chart"></div>
	<script type="text/javascript">
		// Wait until document ist loaded
		$(document).ready(function(){
			// Light gray marks that javascript ist still loading the data
			$('#chart').css('background-color', '#999')
			$.getJSON($SCRIPT_ROOT + "/loadBarChart/{{chartName}}", function(jsonResult){
				// Parse data returned by the Python Connector
				var data = JSON.parse(jsonResult);
				var valueKey = Object.keys(chartData[0])[0];
				for(var i = 0; i < data.length; i++)
					data[i][valueKey] = +data[i][valueKey]; // Make sure that the value is recognized as an int value

				// Init and show table
				displayChart(data, "chart")
				$('#chart').css('background-color', '#FFF')
			});
		});
	</script>
</body>
</html>